;(function($){$.fn.layer=function(opt){var opt=$.extend({},$.fn.layer.defaults,opt);$(this).on(opt.trigger,function(){mainlayer(opt,0,$(this))})};jQuery.layer=function(opt){var opt=$.extend({},$.fn.layer.defaults,opt);mainlayer(opt,1,0)};$.fn.layer.defaults={width:null,height:null,trigger:"click",autoclose:0,title:"",contents:"",poptype:0,addclass:"",position:"fixed",closeparent:true,confirm:null,confirmback:null,cancel:null,cancelback:null,closeback:null,loadback:null,afterback:null,move:true,masklayer:"body",align:true,showclose:false,shadeclose:false,animation:1};function mainlayer(opt,lt,th){$("#grey-background").remove();if(opt.masklayer){$(opt.masklayer).append('<div id="grey-background"></div>')}if(opt.loadback!=null){opt.loadback()}if(opt.closeparent){$(".alert-layer").hide()}else{$(".alert-layer").each(function(){if(!$(this).is(":hidden")){$(this).css({"z-index":20141126})}})}var hc="";var ht="";var hb="";var c="";var $c="";hc='<a href="javascript:;" class="close alert-close bg-icon">×</a>';ht='<h3 class="alert-title"><b></b><span>'+opt.title+'</span></h3>';if(opt.confirm!=null||opt.cancel!=null){hb+='<div class="alert-button">';if(opt.confirm!=null){hb+='<input class="btn btn-confirm" type="submit" name="button" value="'+opt.confirm+'">'}if(opt.cancel!=null){hb+='<input class="btn btn-cancel" type="reset" name="button" value="'+opt.cancel+'">'}hb+="</div>"}var comm={subtr:function(){var lc=encodeURIComponent(opt.contents).replace(/%/g,'').replace(/ /g,'').replace(/\./,'').toLocaleLowerCase();return"layer"+lc.substring(0,10)+lc.substring(lc.length-5)},position:function(layer){var ww=$(window).width();var wh=$(window).height();var aw=opt.width==null?layer.outerWidth(true):opt.width;layer.css({"width":aw});var ah="";if(opt.height!=null){ah=opt.height}else{if(layer.outerHeight(true)>wh){ah=wh}else{ah=layer.outerHeight(true)}}var sl=$(window).scrollLeft();var st=$(window).scrollTop();if(opt.position!="absolute"){st=0}var al=sl+(ww-aw)/2;var at=(wh-ah)/2;if(at<0){at=0}at=st+at;layer.css({"height":ah,"position":opt.position});if(opt.align){layer.css({"left":al,"top":at})}var sh=0,sat=0,sc=0;if($c.children(".alert-title").length>0){sat=parseInt($c.children(".alert-title").outerHeight(true))}var ac=$c.children(".alert-content");if(ac.length>0){sc=parseInt(ac.css("padding-top"))+parseInt(ac.css("padding-bottom"));sh=ah-sat-sc;ac.css({"height":sh})}if(opt.move){var mt=$c.children(".alert-title");var m=false,dh=$(document).height();var xx,yy;mt.css({"cursor":"move"});mt.mousedown(function(e){$("body").append('<div class="alert-moves" style="width:'+(aw-6)+'px;height:'+(ah-6)+'px;left:'+$c.css("left")+';top:'+$c.css("top")+';position:'+opt.position+'" data-layer="'+c+'"></div>');m=true;xx=e.pageX-parseInt($c.css("left"));yy=e.pageY-parseInt($c.css("top"));if(document.attachEvent){mt[0].attachEvent('onselectstart',function(){return false})}return false});$(document).mousemove(function(e){if(m){var x=e.pageX-xx;var y=e.pageY-yy;if(x<=0){x=0}else if(x>ww-aw){x=ww-aw}if(y<=0){y=0}else if(y>dh-ah){y=dh-ah}$(".alert-moves").css({top:y,left:x});return false}}).mouseup(function(){m=false;var am=$(".alert-moves");if(getdata(am,"layer")!=""){$("."+getdata(am,"layer")).animate({"left":am.css("left"),"top":am.css("top")})}am.remove()})}}};if(opt.poptype==0){c=opt.contents.replace(".",'');if(opt.contents==""&&lt==0){c=getdata(th,"action");$c=$("."+c)}else{$c=$("."+c)}}else if(opt.poptype==1){var h;c=comm.subtr();$c=$("."+c);if($c.length==0){$("body").append('<div class="alert-loading">正在加载...</div>');h='<div class="'+c+'">';h+='<div class="alert-content"><div class="alert-load"></div></div>';h+="</div>";$("body").append(h);$c=$("."+c);$c.find(".alert-load").load(opt.contents,function(response,status,xhr){$(".alert-loading").remove();if(status=="success"){if(opt.afterback!=null){opt.afterback($c)}}else{$c.find(".alert-load").html("加载错误："+xhr.statusText)}comm.position($c);$c.addClass("alert-anim-"+opt.animation).show()})}else{$c.show();if(opt.afterback!=null){opt.afterback($c)}}$c=$("."+c)}else if(opt.poptype==2){var h;c=comm.subtr();$c=$("."+c);if($c.length==0){h='<div class="'+c+'">';h+='<div class="alert-content"><div class="alert-txt"><span class="icon"></span>'+opt.contents+'</div></div>';h+="</div>";$("body").append(h)}$c=$("."+c)}if(!$c.hasClass("alert-layer")){$c.addClass("alert-layer")}if(!opt.align){$c.attr("data-resize","1")}$c.addClass(opt.addclass);if($c.children(".alert-title").length==0&&opt.title!=""){$c.prepend(ht)}if($c.children(".alert-close").length==0&&opt.showclose){$c.prepend(hc)}if($c.find(".alert-button").length==0){$c.children(".alert-content").append(hb)}if(opt.poptype!=1){comm.position($c);$c.addClass("alert-anim-"+opt.animation).show();if(opt.afterback!=null){opt.afterback($c)}}if(opt.shadeclose){$("#grey-background").on("click",function(){if(opt.autoclose==0){layer.close()}})}var cleartime;if(opt.autoclose!=0){$c.find(".alert-closetime").remove();$c.append('<div class="alert-closetime"></div>');autoclosetime(parseInt(opt.autoclose))}function autoclosetime(time){if(time>0){--time;$c.find(".alert-closetime").html(time+"秒后将关闭！");cleartime=setTimeout(function(){autoclosetime(time)},1000)}else{if(opt.closeback!=null){opt.closeback($c)}else{layer.close($c)}}}if(opt.confirm!=null){$c.find(".btn-confirm").click(function(e){if(opt.confirmback!=null){opt.confirmback($c)}else{clearTimeout(cleartime);layer.close($c)}e.stopImmediatePropagation()})}if(opt.cancel!=null){$c.find(".btn-cancel").click(function(e){if(opt.cancelback!=null){opt.cancelback($c)}else{layer.close($c)}e.stopImmediatePropagation()})}$c.find(".close").on("click",function(e){if(opt.closeback!=null){opt.closeback($c)}else{clearTimeout(cleartime);layer.close($c)}e.stopImmediatePropagation()});$(window).resize(function(){var rww=$(window).width(),rwh=$(window).height(),rst=$(window).scrollTop();$(".alert-layer").each(function(){var rth=$(this);if(getdata(rth,"resize")!="1"){var rl=(rww-rth.outerWidth(true))/2;var rt=(rwh-rth.outerHeight(true))/2;if(opt.position=="absolute"){rt=rt+rst}rth.animate({"left":rl,"top":rt})}})})}$.fn.extend({inputfocus:function(opt){opt=jQuery.extend({fc:"focus"},opt);var isie=$.support.msie,v=$.support.version,dm=document.documentMode;if((isie&&dm<=9)||(isie&&v<=9.0&&!dm)){$(this).each(function(){var $this=$(this);if($this.attr("placeholder")!=""&&typeof($this.attr("placeholder"))!="undefined"&&$this[0].tagName=="INPUT"&&$this.next("span.placeholder").length==0){var block="block",t=$this.position().top,lf=$this.position().left;if($this.val()!=""){block="none"}$this.after('<span class="placeholder" style="z-index:10;display:'+block+';position:absolute;cursor:text;left:'+lf+'px;top:'+t+'px;height:'+$this.outerHeight()+'px;width:'+$this.width()+'px;padding-left:'+$this.css("padding-left")+'">'+$this.attr("placeholder")+'</span>');$("span.placeholder").on("click",function(){$(this).prev("input").focus()})}});$(this).on("focus",function(){var $this=$(this);if($this[0].tagName=="INPUT"){$this.addClass(opt.fc)}$this.next("span.placeholder").hide()}).on("blur",function(){var $this=$(this);$this.removeClass(opt.fc);if($this.val()!=""){$this.next("span.placeholder").hide()}else{$this.next("span.placeholder").show()}})}},selectdrapdown:function(opt){opt=jQuery.extend({trigger:"click",linum:0,slidespeed:0,zindexdiv:".form-group",afterback:null,fc:"focus",width:"100%"},opt);var $this=$(this);$this.each(function(){var $th=$(this),w=getdata($th,"width")>0?getdata($th,"width"):opt.width;if($th.children(".arrow").length==0){$th.append('<span class="arrow"></span>')}$th.css({"width":$th.children(".input-control").innerWidth()});ulheight($th);$th.children(".drapdown").css({top:$th.children(".input-control").outerHeight()-1,width:w})});function ulheight(th){var divlinum=parseInt(getdata(th,"num")),num=th.find("li").length,liheight=th.find("li").outerHeight(),dh="";if(!isNaN(divlinum)){if(divlinum<num&&divlinum!=0){dh=liheight*divlinum}}else if(opt.linum!=0&&opt.linum<num){dh=liheight*opt.linum}th.children(".drapdown").children("ul").css("height",dh)}$this.children(".input-control").bind(opt.trigger,function(event){ulheight($(this).parents(".select-drapdown"));bind($(this),event);event.stopImmediatePropagation()});$this.find(".arrow").bind(opt.trigger,function(event){ulheight($(this).parents(".select-drapdown"));bind($(this),event);event.stopImmediatePropagation()});function bind($this,ev){var $th=$this.parents(".select-drapdown");if($th.hasClass("open")){restore()}else{restore();$th.addClass("open").css("z-index",999);if(opt.zindexdiv!=null){$th.parents(opt.zindexdiv).addClass("current").css("z-index",999)}$th.children(".input-control").addClass(opt.fc);$th.children(".drapdown").slideDown(opt.slidespeed)}ev.stopPropagation()}$(document).click(function(e){var p=$(e.target).parents(".select-drapdown").length;if(p==0){restore()}});$this.find("li:not(.notdata)").on("click",function(){var $th=$(this);var $value=getdata($th,"value");var $hidden=$th.parents(".select-drapdown").find(".input-value");var $default=getdata($th.parents(".select-drapdown").find(".input-control"),"default");$th.addClass("hover").siblings("li").removeClass("hover");var ic=$th.parents(".select-drapdown").children(".input-control");if(ic[0].tagName=="INPUT"){ic.removeClass("placeholder").val($th.text())}else{ic.removeClass("placeholder").html($th.html())}if($default!=""&&$th.parent("ul").find(".default").length==0){$th.parent("ul").prepend('<li class="default" data-value="">'+$default+'</li>')}if($th.text()==$default){$th.parents(".select-drapdown").children(".input-control").addClass("placeholder")}if($hidden.length>0){$hidden.val($value)}restore();opt.afterback!=null?opt.afterback($th):"";return false});function restore(){var sd=$(".select-drapdown");sd.removeClass("open").css("z-index","").children(".drapdown").slideUp(opt.slidespeed);sd.parents(opt.zindexdiv).removeClass("current").css("z-index","");sd.children(".input-control").removeClass(opt.fc)}},progress:function(opt){opt=jQuery.extend({speed:2000},opt);$(this).each(function(){var th=$(this);th.children("b").animate({width:th.children("span").html()},opt.speed);if(th.children("i").length>0){th.children("i").animate({width:th.children("i").html()},opt.speed)}})},tooltip:function(opt){opt=jQuery.extend({trigger:"mouseover",direction:"tleft",maxwidth:500,fade:300,y:10,x:20,addclass:"",delay:500,move:true},opt);var mt=$(".mousetips");var d;var cleartime;var oy;$(this).on(opt.trigger,function(e){mt.remove();clearTimeout(cleartime);var t=$(this);if(getdata(t,"alt")!=""){d=getdata(t,"direction")!=""?getdata(t,"direction"):opt.direction;oy=getdata(t,"y")!=""?getdata(t,"y"):opt.y;$("body").append('<div class="mousetips '+d+'" style="max-width:'+opt.maxwidth+'px;"><i><em></em></i>'+getdata(t,"alt")+'</div>');mt=$(".mousetips");if(opt.addclass!=""){mt.addClass(opt.addclass)}var x=e.pageX;var yt=t.offset().top;var theight=t.outerHeight();position(d,x,yt,theight,mt)}}).on("mouseleave",function(){var delay=getdata($(this),"delay")>0?getdata($(this),"delay"):opt.delay;cleartime=setTimeout(function(){mt.fadeOut(opt.fade,function(){mt.remove()})},delay)}).mousemove(function(e){if(opt.move){var x=e.pageX;var yt=$(this).offset().top;var theight=$(this).outerHeight();position(d,x,yt,theight,mt)}});mt.on("mouseenter",function(){clearTimeout(cleartime)}).on("mouseleave",function(){$(this).fadeOut(opt.fade,function(){$(this).remove()})});function position(d,x,y,h,th){var winwidth=$(window).width();var oh;var ow=th.outerWidth(true);switch(d){case"tleft":mt.css({"left":x-opt.x});oh=th.outerHeight(true);mt.css({"top":y-oy-oh});break;case"tright":mt.css({"left":"auto","right":winwidth-x-opt.x});oh=th.outerHeight(true);mt.css({"top":y-oy-oh});break;case"bleft":mt.css({"left":x-opt.x,"top":y+h+oy});break;case"bright":mt.css({"left":"auto","right":winwidth-x-opt.x,"top":y+h+oy});break;case"tcenter":mt.css({"left":x-ow/2});oh=th.outerHeight(true);mt.css({"top":y-oy-oh});break;case"bcenter":mt.css({"left":x-ow/2,"top":y+h+oy});break}mt.fadeIn(opt.fade)}},tabs:function(opt){opt=jQuery.extend({trigger:"click",callback:null,content:".tab-content"},opt);var $tab=$(this).find("li");$tab.on(opt.trigger,function(){$(this).addClass("current").siblings().removeClass("current");$(opt.content).children(".tab-pane").hide().eq($tab.index(this)).show();if(opt.callback!=null){opt.callback($(this))}})},collapse:function(opt){opt=jQuery.extend({slide:0,closeother:true,callback:null},opt);$(this).find(".collapse").on("click",function(){var tp=$(this).parents(".panel-title");if(tp.hasClass("show")){tp.removeClass("show");tp.next(".panel-content").slideUp(opt.slide);if(opt.callback){opt.callback($(this))}}else{tp.addClass("show");tp.next(".panel-content").slideDown(opt.slide);if(opt.closeother){$(".panel-title").not(tp).next(".panel-content").slideUp(opt.slide);$(".panel-title").not(tp).removeClass("show")}if(opt.callback){opt.callback($(this))}}})},fullscreen:function(opt){opt=jQuery.extend({include:true,height:0,minheight:0},opt);var th=$(this);full(th);$(window).resize(function(){full(th)});function full(th){var wheight=$(window).height(),hfheight=0,h="",opth=getdata(th,"height")>0?getdata(th,"height"):opt.height,optmh=getdata(th,"minheight")>0?getdata(th,"minheight"):opt.minheight,optin=getdata(th,"include")!=""?getdata(th,"include").toString():opt.include.toString();if(optin=="true"){hfheight=parseInt($(".header").outerHeight(true))+parseInt($(".footer").outerHeight(true))}h=wheight-hfheight-opth;if(h>optmh){th.height(h)}else{th.height("")}}},myscroll:function(opt){opt=jQuery.extend({speed:30,type:0},opt);var intid=[];$(this).each(function(i){var th=$(this),liheight=parseInt(th.find("li").outerHeight(true));intid[i]=setInterval(function(){if(th.find("ul").height()<=th.height()){clearInterval(intid[i])}else{marquee(th,liheight)}},opt.speed);th.hover(function(){clearInterval(intid[i])},function(){intid[i]=setInterval(function(){if(th.find("ul").height()<=th.height()){clearInterval(intid[i])}else{marquee(th,liheight)}},opt.speed)})});function marquee(obj,lih){var mt="-=1",am=0;if(opt.type==1){mt="-"+lih;am=500}obj.find("ul").animate({marginTop:mt},am,function(){var th=$(this);var ul=Math.abs(parseInt(th.css("margin-top")));if(ul>=lih){th.find("li").slice(0,1).appendTo(this);th.css("margin-top",0)}})}},inputzoom:function(opt){opt=jQuery.extend({f:0,c:"w"},opt);$(this).before('<div class="zoomnum" style="display:none"></div>');var text="";var keycode="";$(this).focus(function(){var th=$(this);var txt=th.val();var splittype=getdata(th,"split")!=""?getdata(th,"split"):opt.f;txtchange.focustxt(txt,th.prev(".zoomnum"),splittype);text=txt}).keydown(function(e){keycode=e.keyCode;if(keycode==90&&e.ctrlKey){return false}}).keyup(function(e){var isie=$.support.msie,iev=$.support.version;var splittype=getdata($(this),"split")!=""?getdata($(this),"split"):opt.f;if(isie&&iev==9.0){var th=$(this);txtchange.focustxt(th.val(),th.prev(".zoomnum"),splittype)}}).bind('input propertychange',function(e){var th=$(this);var newtext=th.val();var zoomnum=th.prev(".zoomnum");var splittype=getdata(th,"split")!=""?getdata(th,"split"):opt.f;if(th.val()!=""){zoomnum.fadeIn()}else{zoomnum.fadeOut();return false}var postion=txtchange.getCursorPos(th.get(0));var cur="";var v=newtext.length-text.length;if(v==1){cur=newtext.substr(postion-1,1);var append="<span>"+cur+"</span>";txtchange.addtxt(zoomnum,append,postion,splittype)}else if(v==-1){txtchange.deltxt(zoomnum,postion,splittype,zoomnum.height(),newtext,keycode)}else if(v>1){cur=newtext.substr(postion-v,v);var p=postion-v+1;for(var i=0;i<v;i++){var append="<span>"+cur.substr(i,1)+"</span>";txtchange.addtxt(zoomnum,append,p,splittype);p++}}else if(v<-1){var dp=postion;for(var i=0;i<Math.abs(v);i++){txtchange.deltxt(zoomnum,dp,splittype,zoomnum.height(),newtext,keycode);dp++}}else if(newtext!=text){txtchange.focustxt(newtext,zoomnum,splittype)}text=newtext;return false}).blur(function(){$(".zoomnum").fadeOut().html("")});var txtchange={addtxt:function(div,append,postion,ty){if(div.children("span").length==0){div.append(append);div.children("span").animate({top:0})}else{if(postion==1){div.prepend(append);div.children("span").eq(0).animate({top:0})}else{var eq=parseInt(postion-2);div.children("span").eq(eq).after(append);div.children("span").eq(eq).next("span").animate({top:0})}}this.format(div,ty)},getCursorPos:function(obj){var result=0;if(obj.selectionStart){result=obj.selectionStart}else{try{var rng;rng=document.selection.createRange();rng.moveStart("character",-event.srcElement.value.length);result=rng.text.length}catch(e){throw new Error(10,"asdasdasd")}}return result},focustxt:function(val,div,ty){var _t="";if(val!=""){for(var i=0;i<val.length;i++){_t+='<span style="top:0">'+val.substr(i,1)+'</span>'}div.html("").append(_t);this.format(div,ty);div.fadeIn();_t=""}else{div.fadeOut().html("")}},deltxt:function(div,d,ty,h,txt,keycode){var t=this;if(keycode==8||keycode==46){div.children("span").eq(d).animate({top:-h},function(){$(this).remove();t.format(div,ty)})}else{t.focustxt(txt,div,ty)}},format:function(div,ty){var s=div.children("span");s.removeClass(opt.c);var splittype;var count=0;if(ty==0){splittype=[4,4,4,4]}else if(ty==1){splittype=[3,4,4]}else if(ty==2){splittype=[6,8,4]}else{splittype=ty}for(var i=0;i<splittype.length;i++){count+=splittype[i];s.eq(count).addClass(opt.c)}}}}});function getdata(th,data){if(typeof(th.data(data))=="undefined"){return""}else{return th.data(data)}}})(jQuery);var layer={close:function(a){var l=$(".alert-layer"),i=0;if(a){l=a}l.fadeOut(0,function(){$(".alert-layer").each(function(){if(!$(this).is(":hidden")){i++;$(this).css({"z-index":""})}});if(i<=0||!a){$("#grey-background").remove()}});return false}};var iconfont={json:function(fontjson){var isie=$.support.msie,v=$.support.version,dm=document.documentMode;if((isie&&dm<=7)||(isie&&v==7.0&&!dm)){var els=document.getElementsByTagName('*'),i,c,el;for(i=0;;i+=1){el=els[i];if(!el){break}c=el.className;c=c.match(/icon-[^\s'"]+/);if(c&&fontjson[c[0]]){el.innerHTML=fontjson[c[0]]}}}}};

function ie7iconfont() {
    var fontjson={"icon-mima":"&#xe675;","icon-shouji":"&#xe63c;","icon-channel":"&#xe65f;","icon-settlement":"&#xe660;","icon-signout":"&#xe661;","icon-arrow-bottom":"&#xe662;","icon-arrow-left":"&#xe663;","icon-add":"&#xe664;","icon-project":"&#xe665;","icon-user":"&#xe667;","icon-jurisdiction":"&#xe668;","icon-money":"&#xe669;","icon-receivables":"&#xe66a;","icon-push":"&#xe66c;","icon-receive":"&#xe66d;","icon-add-project":"&#xe66e;","icon-user2":"&#xe66f;","icon-number":"&#xe670;","icon-mail":"&#xe672;","icon-calendar":"&#xe673;","icon-set":"&#xe674;"};
    iconfont.json(fontjson);
}

$(function () {
    ie7iconfont();
//    $(".open-layer").layer();//通用弹窗层
//    $(".input-control").inputfocus();
	//表格
    $(".table-comm tr:even td").addClass("bg");
});






